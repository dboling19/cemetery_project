<!DOCTYPE html>
<html>
  <head>
    {% block stylesheets %}
      {{encore_entry_link_tags('app')}}
    {% endblock %}

    <title>Cemetery - Display</title>
  </head>

  <body>
    <div style="position:fixed;top:0;width:100%">
      {{ include("navbar.html.twig") }}
    </div>
    <div class="w3-container" style = "margin-top:40px">
    </div>
    <form>
      <div class="w3-row">
        <input type="text"
                name="search"
                class="form-control"
                value="{{ app.request.query.get('search') }}"
                placeholder="Search...">
        <div class="input-group-append">
          <input type="submit"
                  class="w3-button w3-border">
              <span class="fa fa-search"></span>
          </input>
        </div>
      </div>
    </form>
    <p>{% if searched == true %}Results: {{ result.getTotalItemCount }}{% endif %}</p>
    <table class="w3-table-all">
      <tr>
        <th>Plot</th>
        <th>{{ knp_pagination_filter(result, {'plot.cemetery': 'West Goshen', 'plot.cemetery': 'Violet', 'plot.cemetery': 'Oakridge' }) }}</th>
        <th>{{ knp_pagination_sortable(result, 'Plot', 'plot.id') }}</th>
        <th>{{ knp_pagination_sortable(result, 'Burial First', 'burial.firstName') }}</th>
        <th>{{ knp_pagination_sortable(result, 'Burial Last', 'burial.lastName') }}</th>
        <th>Owner First</th>
        <th>Owner Last</th>
        <th>Notes</th>
        <th></th>
      </tr>
      {% for row in result %} {# simple loop to output rows #}
        <tr>
          <td>{{ row.id }}</td>
          <td>{{ row.cemetery }}</td>
          <td>{{ row.section ~ row.lot ~ row.space }}</td>
          <td>{% if row.burial != null %}{{ row.burial.firstName }}{% endif %}</td>
          <td>{% if row.burial != null %}{{ row.burial.lastName }}{% endif %}</td>
          <td>
            {% if row.owner != null %}
              {% for owner in row.owner %}
                {{ owner.firstName }};
              {% endfor %}
            {% endif %}
          </td>
          <td>
            {% if row.owner != null %}
              {% for owner in row.owner %}
                {{ owner.lastName }};
              {% endfor %}
            {% endif %}
          </td>
          <td>{{ row.notes }}</td>
          <td><div class="w3-center"><a href="{{ path('details', { id: row.id }) }}" class="w3-button w3-ripple w3-border">Details</a></div></td>
        </tr>
      {% endfor %}
    </table>

    <div class="w3-bar w3-bottom">
      <div class="w3-bar-item">{{ knp_pagination_render(result) }}</div>
    </div>

  </body>

</html>

